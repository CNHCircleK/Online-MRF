<!DOCTYPE html>
<html>
<head>
	<title>Test Page</title>
</head>
<body>
	<script
		src="https://code.jquery.com/jquery-3.3.1.min.js"
		integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
		crossorigin="anonymous">		
	</script>

	<script>
		var token = null;
		$.ajax({
			url: "http://localhost:3000/signin",
			type: 'post',
			data: {
				name: "user",
				password: "pass"
			},
			dataType: 'json',
			success: function(res){
				if(res.success){
					token = res.result;
					$.ajax({
						url: "http://localhost:3000/events/new",
						type: 'post',
						beforeSend: function(req){
							req.setRequestHeader("Authorization", "Basic " + token);
						},
						dataType: 'json',
						data: {
							name: "name",
							chair_id: "5c3ff95dc6a26d70b3be4623", 
							time: {
								start: new Date(), 
								end: new Date()
							},
							location: "location",
							contact: "contact",
							tags: ["5b3f125b05917c3b02dfc69c", "eee"],
							attendees: ["5c3ff95bc6a26d70b3be4621", "ddd", "5c3ff95dc6a26d70b3be4623", "5c3ff95dc6a26d70b3be4643"],
							hoursPerAttendee: {
								service: 3.1,
								leadership: 4.2,
								fellowship: 5.3
							},
							overrideHours: [
							{"attendee_id": "5c3ff95dc6a26d70b3be4623", service: 100, leadership: 101, fellowship: 102},{"attendee_id": "5b498a5b200a8f6afa46c1sadasd0", service: 100, leadership: 101, fellowship: 102}],
							fundraised: {
								amountRaised: 10.4,
								amountSpent: 20.4,
								usedFor: "Usedfor"
							},
							categories: ["Test1", "Test2", "Test3", "<script><\/script>"],
							comments: {
								summary: "sum",
								strengths: "str",
								weaknesses: "weak",
								improvements: "impr"
							},
							drivers: [{"driver": "5b498a5b200a8f6afa46c1d0", miles: 3.3}],
							kfamAttendance: [{org: "Castro Valley Key Club", numAttendees: 3}]
						},
						success: function(res){
							console.log(res);
							$.ajax({
								url: "http://localhost:3000/events/" + res.result,
								type: 'get',
								beforeSend: function(req){
									req.setRequestHeader("Authorization", "Basic " + token);
								},
								dataType: 'json',
								success: function(res){
									console.log(res);
								},
								error: function(res){
									console.log(res.responseText);
								}
							});	
						},
						error: function(res){
							console.log(res.responseText);
						}
					});		
				}		
			}
		});
	</script>

</body>
</html>